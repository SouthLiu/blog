# 函数提高
## 函数默认值
### 在C++中，函数的形参列表中的形参是可以有默认值的。
### 语法：`返回值类型 函数名 (参数 = 默认值) {}`
### 注意事项： 函数声明和函数实现只能有一个默认值。
```cpp
void func(int a = 10, int b = 10);
void func(int a = 10, int b = 10) // 报错：函数声明和函数实现只能有一个默认值
{
  // ...
};
```

## 函数占位参数
### C++中的函数的形参列表里可以有占位参数，用来占位，调用函数时必须填补该位置。
### 语法：`返回值类型 函数名 (数据类型) {}`
```cpp
void func(int  a, int) {
	cout << a << endl;
}

void main() {
	// 第二位占位符必须传
	func(10, 20);
	system("pause");
}
```

## 函数重载
### 在同一作用域下，不同类型、不同数量、不同顺序都能函数重载。
### 注意事项：不同返回类型不能函数重载。
```cpp
void func(int a) {
	cout << "int func" << endl;
}

// 直接调用func(10)会报错，出现二义性，调取func(10, 20)则正常
//void func(int a, int b = 10) {
//	cout << "int a,b func" << endl;
//}

void func(string a) {
	cout << "string func" << endl;
}
void func(int  a, double b) {
	cout << "int double func" << endl;
}

void func(double  a, int b) {
	cout << "double int func" << endl;
}

// int func(int a) {} // 报错：不能重载返回值不同的函数

void main() {
	func(10); // int func
	func("test"); // string func
	func(10, 3.14); // int double func
	func(3.14, 10); // double int func

	system("pause");
}
```

# 类和对象
### C++面向对象三大特征：**封装**、**继承**、**多态**。

## 封装
### 封装的意义
* 将属性和行为作为一个整体，表现生活中的事物。
* 将属性和行为加以权限控制。
```cpp
class Student {
public:
	string name;
	int id;

	// 显示学生名字和编号
	void show() {
		cout << "学生姓名：" << name
			<< " 学生编号：" << id << endl;
	}

	// 修改学生编号和名字
	void edit() {
		cout << "请输入学生姓名：" << endl;
		cin >> name;
		cout << "请输入学生编号：" << endl;
		cin >> id;
	}
};

void main() {
	Student stu;
	stu.edit();
	stu.show();
	system("pause");
}
```

## 类的访问权限
### 成员：指类中属性和行为。
### 分为三种：
* public(公共权限)：成员类内可以访问，类外也可以访问。
* protected(保护权限)：成员类内可以访问，类外不可以访问，子类可以访问父类的保护内容。
* private(私有权限)：成员类内可以访问，类外不可以访问，子类不可以访问父类的私有内容。
```cpp
class Person {
public:
	string name;
	void func() {
		name = "测试";
		car = "三轮";
		passwrod = 123456;
	}

protected:
	string car;

private:
	int passwrod;
};

void main() {
	Person person;
	person.name = "test";
	//person.car = "奔驰"; // 报错：类外不能访问
	//person.password = 789; // 报错：类外不能访问

	system("pause");
}
```

## struct和class区别
### struct：默认公共权限。
### class：默认私有权限。
```cpp
class ClassDemo {
	int a;
};

struct StructDemo {
	int a;
};

void main() {
	ClassDemo c_demo;
	StructDemo s_demo;
	//c_demo.a = 20; // 报错：class默认私有权限
	s_demo.a = 20;

	system("pause");
}
```

## 构造函数和析构函数
### 构造函数：主要作用在于创建对象时为对象属性赋值，构造函数由编译起自动调用，无须手动调用。
### 析构函数：主要作用在于对象**销毁前**系统自动调用，执行一些清理工作。
### 构造函数没有返回值，不用写void，可以有参数，因此可以发生重载。
### 析构函数没有返回值，不用写void，不可以有参数，因此不可以发生重载。
### 语法：
* 构造函数：`类名(参数) {}`
* 析构函数：`~类名() {}`
```cpp
class Person {
public:
  Person() {
    cout << "Person无参构造函数" << endl;
  };
  Person(int num) {
    cout << "Person有参构造函数" << endl;
  };
  Person(const Person& p) {
    cout << "Person拷贝构造函数" << endl;
  };
  ~Person() {
    cout << "Person析构函数" << endl;
  };
};

void test() {
  // 无参构造不能加()，编译器会被认为是个函数声明
  Person p1;
  Person p2(10);
  Person p3(p2);

  // 显示法
  // Person p1;
  // Person p2 = Person(10);
  // Person p3 = Person(p2);

  // 隐式转化法
  // Person p4 = 10;
};

void main() {
  test(); // Person无参构造函数
      // Person有参构造函数
      // Person拷贝构造函数
      // Person析构函数
      // Person析构函数
      // Person析构函数
  system("pause");
}
```

## 拷贝构造函数调用时机
1. 使用一个已经创建完毕的对象来初始化一个对象。
2. 值传递的方式给函数参数传值。
3. 以值方式返回局部对象。(报错)
```cpp
class Person {
public:
	Person() {
		cout << "默认构造函数" << endl;
		age = 10;
	};
	Person(Person& p) {
		cout << "拷贝构造函数" << endl;
		age = p.age;
	};
	~Person() {
		cout << "析构函数" << endl;
	};

private:
	int age;
};

void test() {
	Person p1;
	Person p2(p1);
};

void sendPerson(Person p) {
};

void test2() {
	Person p;
	sendPerson(p);
};

void main() {
	// 1. 使用一个已经创建完毕的对象来初始化一个对象。
	test();
	// 2. 值传递的方式给函数参数传值。
	test2();
	system("pause");
}
```

## 函数调用规则
* 如果用户定义有参构造函数，c++不在提供默认无参构造，但是会提供默认拷贝构造。
* 如果用户定义拷贝构造函数，c++不在提供其他构造函数。
```cpp
class Person {
public:
	int age;
	Person() {
		cout << "默认构造函数" << endl;
		age = 10;
	};
	//Person(Person& p) {
	//	cout << "拷贝构造函数" << endl;
	//	age = p.age;
	//};
	~Person() {
		cout << "析构函数" << endl;
	};
};

void test() {
	Person p1;
	Person p2(p1);
	// 编译器会自动生成拷贝构造
	cout << p2.age << endl; // 10
};

void main() {
	test();
	system("pause");
}
```
### 有拷贝构造函数之后就不会提供其他构造函数
```cpp
class Person {
public:
	int age;
	//Person() {
	//	cout << "默认构造函数" << endl;
	//	age = 10;
	//};
	Person(Person& p) {
		cout << "拷贝构造函数" << endl;
		age = p.age;
	};
	~Person() {
		cout << "析构函数" << endl;
	};
};

void test() {
	Person p1; // 报错：有拷贝构造函数之后就不会提供其他构造函数
};

void main() {
	test();
	system("pause");
}
```