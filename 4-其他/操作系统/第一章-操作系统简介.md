# 第一节 什么是操作系统
### 操作系统是覆盖在硬件上`第一层`的软件，在数据库管理、编译软件及其他应用程序都运行在操作系统之上，操作系统为这些软件提供运行环境。

### 在计算机领域，操作系统分为`软件接口`和`硬件接口`，硬件接口如USB接口、串口和并口，软件接口如C语言中的函数调用printf()。

### 操作系统必须完成两个目标：
1. 与硬件部分相互作用，为包含在硬件平台上的所有底层可编程部件提供服务。
2. 为运行在计算机系统上的应用程序(即所谓用户程序)提供运行环境。

### 现代计算机系统有一个重要特点是`支持多任务`，即允许在同一个操作系统内同时驻留多个程序。

### 操作系统所管理的资源主要包括`处理器`、`内存`、`设备`、`文件`，在网络操作系统中还包括`网卡`和`宽带`。

### 操作系统主要功能：
1. `处理器管理`。在单处理机系统中执行多个程序流，必须由操作系统的处理机调度来管理处理机的分配，以使用多个程序共享处理机，从宏观角度看多个程序能同时顺利执行。在多处理机系统中，也需要操作系统对多个处理机在多任务的情况下进行有效管理
2. `内存管理`。在多任务系统中，内容不再是独占资源，而是可能被多个应用程序共同占用。如何为多个应用程序分配内存并使不同应用程序的地址空间互不干扰，如何在程序执行完毕后回收其所占有的内存，以及完成逻辑地址到物理地址的转换，都是操作系统内存管理程序要完成的功能。
3. `设备管理`。设备管理主要完成接受用户的I/O请求、为用户分配I/O设备、管理I/O缓存和驱动I/O设备等功能。
4. `文件管理`。计算机系统为这些需要长时间保存的数据信息以文件的形式保存在外部存储设备中(如硬盘、光盘、磁带和U盘)，操作系统通过自己的文件管理程序完成外存空间的分配、回收、文件的按名存取、文件的组织、共享与保护等功能。

```base
处理机包括中央处理器、主存储器、输入-输出接口、加接外围设备构成完整的计算机系统。
```

---

# 第二节 操作系统的发展
### 操作系统的发展从时间顺序上经历了从`无操作系统`到`单道批处理系统`、`多道程序系统`(多道批处理系统、分时系统)的发展过程。随着计算机应用领域的扩大、计算机体系结构的多样化，又出现了`微机操作系统`、`网络操作系统`、`实时操作系统`、`嵌入式操作系统`和`物联网操作系统`。

### 第一代计算机(1945~1955年)使用`电子管`作为主要的电子器件，用插件板上的硬连线和穿孔卡片表示程序，没有用来存储程序的内存，无操作系统。

### 第二代计算机(1955~1965年)是使用主要电子器件是`晶体管`，开始使用`磁性存储设备`，内外存容量增加，计算机运行速度提高，出现了早期单道批处理系统。

### 操作员在专门用于计算的、性能较高的计算机上装入早期的操作系统，也称为`监视程序`，它能自动从磁带读入作业并使之运行，把作业运行结果写入专门存放输出结果的磁带上。

### 随着电子技术的发展，计算机开始采用集成`电路芯片`作为主要的电子器件，IBM 360是第一个采用小规模集成电路芯片的主流机型。

### `实时系统`是支持实时计算的系统。

### 批处理系统、分时系统、实时系统的特点：
1. 单道批处理系统的特点。单道批处理系统内存中只有一道作业，可以自动成批处理作业。其特点包括`单道性、顺序性、自动性`。
2. 多道批处理系统。在多道批处理系统中，用户所提交的作业都先存放在外存中并排成一个队列，该队列被称为`“后备作业队列”`，与单道批处理系统相比，多道批处理系统支持多道程序驻留内存，CPU不在空闲等待I/O。多道批处理系统的特点包括`多道性、调度性、无序性、复杂性`。多道批处理系统的`优点是能提高CPU、内存和I/O设备的利用率和系统吞吐量`。多道批处理系统的`缺点是系统平均周转时间长，缺乏交互能力`。`周转时间`是指从作业被提交给系统开始到作业完成为止的时间。
3. 分时系统特点。分时操作系统是能让用户通过终端共同使用计算机，分时操作系统特点包括`多路性、独立性、及时性和交互性`。分时操作系统的`优点为人机提供了交互的方便性，使多个用户可以通过不同的终端共享主机`。
4. 实时系统特点。实时系统主要用于实时控制和实时信息处理领域。实时系统必须能及时响应外部事件的请求，在规定的时间内完成对该事件的处理，并控制所有实时任务协调一致地运行。与分时系统相比，实时系统的特点包括`多路线、独立性、及时性、交互性、可靠性`

### 分时系统的实现需要解决两个关键问题，即`及时接收`和`及时处理`。

### 主机操作系统是运行在大型主机上的操作系统，主要提供三个服务：`批处理`、`事务处理`和`分时处理`。

### 批处理系统处理不需要交互式用户干预的周期性作业，`保险公司的索赔处理`或者`连锁商店的销售报告`通常以批处理的方式完成。

### `事务处理系统`负责大量小请求。

### `分时系统`允许多个远程用户同时在计算机上工作，执行命令或处理作业。

### `嵌入式系统`的概念出现于20世纪70年代，是宿主于非计算机设备中的计算机系统。嵌入式操作系统是运行于嵌入式设备中的操作系统。

---

# 第三节 操作系统的特征
### 现代操作系统都支持多任务，具有`并发`、`共享`、`虚拟`和`异步性`的特征。

---

# 第四节 操作系统的功能
### 内存管理的主要任务是`为多道程序的运行提供良好的环境`，方便用户使用内存，提高内存利用率，以及逻辑上扩充内存以实现虚拟存储。

### 内存管理应具有`内存分配`、`内存保护`、`地址映射`和`内存扩充`功能。

### 内存保护的任务：
1. 使操作系统内核的空间不会被用户随意访问，以保证系统的安全和稳定。
2. 确保每道用户程序都在自己的内存空间中运行，互不干扰。

### CPU执行过程中访问内存时，需要把程序的逻辑地址转变为物理地址，这个转换过程称为`地址映射`。

### 为了能从逻辑上扩充内存，系统必须具有内存扩充机制，以实现`请求调入功能和置换功能`。

### 进程管理主要包括`进程的描述与组织`、`进程控制`、`进程同步`、`进程通信`及`进程调度`。

### 设备管理应具有的功能：
1. 缓冲管理。管理各种缓冲区。
2. 设备分配。分配用户I/O所需要的设备。
3. 设备处理。由设备驱动程序来实现CPU与设备控制器之间的通信。
4. 设备独立性和虚拟设备。设别独立性功能使应用程序独立于物理设备。

### 目录包括`文件名`、`文件属性`及`文件地址`等信息。

### 操作系统提供给程序员的接口是`系统调用`。

# 第五节 操作系统的体系结构
### `明确清晰的软件体系结构`是一条贯穿软件系统整个生命周期的主线，是软件设计成功的基础和关键，也是对软件大型化、复杂化趋势的一种很好的应对决策。

### `单体内核`是操作系统中最早、最常见的体系结构。

### 具有单体内核结构的典型操作系统有`UNIX系统`、`MS-DOS`、`Linux`、`Mac OS X`和`BSD`等系统。

### 层次结构的基本思想：
`将操作系统分解为多个小的、容易理解的层，系统功能被隔离在不同层中，每一层提供对系统功能的部分抽象，然后采用单向调用的顺序，形成一连串彼此连续的对系统功能的“抽象串”，最终形成整个系统的完整抽象。`

### 分层结构最经典的例子是`Dijkstra的THE系统`，它是20世纪60年代在TechnischeHogeschool Eindhoven上开发的。

### 微内核技术是操作系统发展的一共里程碑，它的核心思想是`核心功能外移`。

### 微内核结构用一个水平分层的结构代替传统的纵向分层的结构的好处：
1. 只要接口规范，操作系统可以方便地增加或删除服务功能，系统具有很好的灵活性。
2. 服务器进程运行在独立的用户进程空间中，如果某个服务器出现问题不会引起系统其他服务器甚至是系统的崩溃，可靠性好。
3. 微内核体积小，便于测试、管理和维护，而且修改服务器的代码也不会影响系统其他部分。
4. 由于微内核技术实现了基于客户/服务器体系结构的操作系统，完全适宜于网络环境及分布式计算模型。

# 指令的执行
### 一个单一指令需要的处理称为`指令周期`，一个指令周期可以划分为两个步骤，分别是`取指周期`和`执行周期`。

### 在每个指令周期开始时，处理器从`存储器`中取一条指令。

### 处理器解释指令并执行要求的动作的分类：
1. 处理器与存储器之间的指令或数据传送操作。
2. 处理器与I/O设备之间的指令或数据传送操作。
3. 算术运算操作或逻辑运算操作。
4. 控制操作，即修改指令的执行顺序的操作。

### 程序执行的过程是`反复取指令和执行指令`的过程。

### 指令执行的结果就是`使寄存器或内存单元的值发生变化`，指令执行的过程也就是存储体内容不断变化的过程。

### 取指令和执行指令是由`硬件`完成的，不同硬件的体系结构支持不同的指令集合，为某一种硬件平台开发的操作系统不能直接在另外一种体系结构的硬件上运行。